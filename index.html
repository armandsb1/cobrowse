<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>

    <h1>Simple co-browse with voice example</h1>

<button type="button" id="start-cobrowse" onclick="genesysWebchat.startCobrowse()">Enter Co-browse Security Key</button>

<!-- Div with this id required to display security key form -->
<div id="cobrowse-security-form"></div>
    
<a href="https://www.genesys.com">Link to Genesys webpage</a>    
    
      <form id="form"> 
  <input type="search" id="query" name="search" placeholder="Search...">
  <button>Search</button>
</form>


<!-- Co-browse with voice uses the webchat API, so include it here -->
<script src="https://apps.mypurecloud.de/webchat/jsapi-v1.js" type="text/javascript"></script>

<!-- For co-browse with voice, you must load the co-browse API. Co-browse with web chat loads the co-browse API for you. -->
<script src="https://cobrowse.mypurecloud.de/cobrowse-jsapi-v1.js?deploymentKey=7TZhrgAxRX8XgJrnMOkJ9HBifVC6qWeA" type="text/javascript"></script>

<script type="text/javascript">
let genesysWebchat = (function() {
function createCobrowseConfig(){

    return {
        // Web chat application URL. Use the correct top-level domain for your Genesys Cloud region, i.e. apps.mypurecloud.ie, apps.mypurecloud.jp, apps.mypurecloud.co.uk.
        "webchatAppUrl": "https://apps.mypurecloud.de/webchat",

        // Web chat service URL
        "webchatServiceUrl": "https://realtime.mypurecloud.de:443",

        // Numeric organization ID
        "orgId": 1234,

        // OrgGuid. Needed for co-browse with voice.
        "orgGuid": "0b64ef26-3681-4cbf-9675-9154ddc0456a",

        // Organization name
        "orgName": "adventussolutions",

        // Log level
        "logLevel": "DEBUG",

        // Locale code
        "locale": "en",

        // CSS class applied to the security key window, but not its contents
        "cssClass": "webchat-frame",

        // Custom style applied to the security key window, but not its contents
        "css": {
            "width": "100%",
            "height": "100%"
        },

        // Optional CSS for styling security key form
        // "contentCssUrl": "http://example.com/style.css",

        // Element id where the security key form will appear.
        "containerEl": "cobrowse-security-form",

        // Set to true to display security key form. Do not include for co-browse with web chat or for PureConnect co-browse with voice.
        "promptForSecurityKey": true
    };
}
return {
    startCobrowse: function() {
        let config = createCobrowseConfig();

        // Can also use callback
        ININ.cobrowse.create(config)
            .then(function(result) {
                // Handle success
            })
            .catch(function(err) {
                // Handle failure
            });
    }
}
})();
</script>
    <script src="https://apps.mypurecloud.de/widgets/9.0/cxbus.min.js" onload="javascript:CXBus.configure({debug:false,pluginsPath:'https://apps.mypurecloud.de/widgets/9.0/plugins/'}); CXBus.loadPlugin('widgets-core');"></script>

<script>
  window._genesys ={"widgets":{"webchat":{"transport":{"type": "purecloud-v2-sockets",
          "dataURL": "https://api.mypurecloud.de",
          "deploymentKey": "51b949a5-51f1-4cfa-aae7-48359254a394",
          "orgGuid": "0b64ef26-3681-4cbf-9675-9154ddc0456a",
          "interactionData":{"routing":{"targetType": "QUEUE",
              "targetAddress": "MarketingCampaign",
              "priority": 2}}},
        "userData":{"addressStreet": "",
          "addressCity": "",
          "addressPostalCode": "",
          "addressState": "",
          "phoneNumber": "",
          "customField1Label": "",
          "customField1": "",
          "customField2Label": "",
          "customField2": "",
          "customField3Label": "",
          "customField3": ""}}}};

  function getAdvancedConfig(){return{"form":{"autoSubmit": false,
        "firstname": "",
        "lastname": "",
        "email": "",
        "subject": ""},
      "formJSON":{"wrapper": "<table></table>",
        "inputs":[{"id": "cx_webchat_form_firstname",
            "name": "firstname",
            "maxlength": "100",
            "placeholder": "Required",
            "label": "First Name"},{"id": "cx_webchat_form_lastname",
            "name": "lastname",
            "maxlength": "100",
            "placeholder": "Required",
            "label": "Last Name"},{"id": "cx_webchat_form_email",
            "name": "email",
            "maxlength": "100",
            "placeholder": "Optional",
            "label": "Email"},{"id": "cx_webchat_form_subject",
            "name": "subject",
            "maxlength": "100",
            "placeholder": "Optional",
            "label": "Subject"}]}};}const customPlugin = CXBus.registerPlugin('Custom');
</script>



<script>

  (function(a,t,c,l,o,u,d){a['_genesysJourneySdk']=o;a[o]=a[o]||function(){(a[o].q=a[o].q||[]).push(arguments)},a[o].l=1*new Date();u=t.createElement(c),
  d=t.getElementsByTagName(c)[0];u.async=1;u.src=l;u.charset='utf-8';d.parentNode.insertBefore(u,d)})(window, document, 'script', 'https://apps.mypurecloud.de/journey/sdk/js/web/v1/ac.js', 'ac');
  ac('init', '0b64ef26-3681-4cbf-9675-9154ddc0456a',{region: 'euc1'});
  ac('pageview');
ac('record', 'product_added',{productName: 'Sample product',
  productPrice: '100.00'});
ac('load', 'autotrackIdle',{idleEvents:[{eventName: 'stuck_on_page'},{idleAfter: 60},{eventName: 'idle_for_2_min', idleAfter: 120},]}, function (){console.log('"autotrackIdle" has been loaded');});

</script>
  
</body>
</html>
